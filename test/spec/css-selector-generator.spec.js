(function() {
  var complex_example;

  complex_example = "   <div id=\"wrap\">\n\n             <header class=\"navbar navbar-static-top\">\n       \n       <nav class=\"navbar-inner\">\n         <div class=\"container\">\n           \n <a href=\"/\" class=\"brand\">Inline<strong>Manual</strong></a>\n\n <ul class=\"nav main-nav\">\n   <li class=\"divider-vertical\"></li>\n   <li class=\"active\"><a class=\"\" href=\"/dashboard\" title=\"dashboard\"><i class=\"icon-th\"></i></a></li>\n   <li class=\"divider-vertical\"></li>\n   <li class=\"\" id=\"nav-topics\"><a href=\"/topics\" title=\"topics\"><i class=\"icon-book\"></i> Topics</a></li>\n   <li class=\"divider-vertical\"></li>\n   <li class=\"\" id=\"nav-sites\"><a class=\"\" href=\"/sites\" title=\"sites\"><i class=\"icon-globe\"></i> Sites</a></li>\n   <li class=\"divider-vertical\"></li>\n   <li class=\"\" id=\"nav-search\"><a class=\"\" href=\"/search\" title=\"search\"><i class=\"icon-search\"></i> Search</a></li>\n   <li class=\"divider-vertical\"></li>\n   <li class=\"\" id=\"nav-support\"><a class=\"\" href=\"/support\" title=\"support\"><i class=\"icon-info-sign\"></i> Getting started</a></li>\n   <li class=\"divider-vertical\"></li>\n </ul>\n\n <div class=\"nav-account pull-right\">\n   <ul class=\"nav\">\n       <li><div class=\"btn-group\">\n <a class=\"btn\" href=\"/admin\"><i class=\"icon-wrench\"></i> Administration</a>\n <button class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">\n   <span class=\"caret\"></span>\n </button>\n <ul class=\"dropdown-menu\">\n   <li>\n     <a href=\"/admin\">\n       <i class=\"icon-th-large\"></i> Dashboard\n     </a></li>\n   <li class=\"divider\"></li>\n   <li>\n     <a href=\"/admin/topics\">\n       <i class=\"icon-book\"></i> Manage topics\n</a>    </li>\n   <li>\n     <a href=\"/admin/invitations\">\n       <i class=\"icon-envelope\"></i> Manage invitations\n</a>    </li>\n   <li class=\"divider\"></li>\n   <li>\n     <a href=\"/admin/users\">\n       <i class=\"icon-user\"></i> Manage users\n</a>    </li>\n   <li>\n     <a href=\"/admin/activities\">\n       <i class=\"icon-road\"></i> Users activities\n</a>    </li>\n   <li class=\"divider\"></li>\n   <li>\n     <a href=\"/admin/organizations\">\n       <i class=\"icon-group\"></i> Manage organizations\n</a>    </li>\n   <li class=\"divider\"></li>\n   <li>\n     <a href=\"/admin/sidekiq\" target=\"_blank\">\n       <i class=\"icon-spinner\"></i> Manage background jobs\n</a>    </li>\n </ul>\n</div>\n</li>\n     <li>\n       <a href=\"/profile\" class=\"user-avatar-link\">\n         <img src=\"https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=30\" class=\"user-avatar\" />\n       </a>\n     </li>\n     <li class=\"account-li\">\n       <a href=\"/profile\" title=\"my account\">marek</a>\n     </li>\n     <li class=\"account-li\">\n       <a href=\"/users/logout\" data-method=\"delete\" title=\"sign-out\"><i class=\"icon-off\"></i></a>\n     </li>\n   </ul>\n </div>\n\n\n         </div>\n       </nav>\n     </header>\n\n\n     <div id=\"main\" role=\"main\">\n       <div class=\"container\">\n         <div class=\"main-content\">\n           \n           <div class=\"row\">\n             <div class=\"span12\">\n               \n               \n<div class=\"row\">\n <div class=\"span8\">\n\n   <h2>What's happening</h2>\n       <ul class=\"unstyled\">\n   <li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"30\">\n       <a href=\"/profile/marek\">marek</a>\n       committed 3 times to\n       <a href=\"/topics/22\">Out of the box file handling</a>\n       <br />\n       <span class='muted' title=\"2014-02-07 13:12\">4 days ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"18\">\n       <a href=\"/profile/marek\">marek</a>\n       committed 12 times to\n       <a href=\"/topics/21\">test 2</a>\n       <br />\n       <span class='muted' title=\"2014-02-05 10:07\">6 days ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"16\">\n       <a href=\"/profile/marek\">marek</a>\n       committed 2 times to\n       <a href=\"/topics/22\">Out of the box file handling</a>\n       <br />\n       <span class='muted' title=\"2013-10-04 19:20\">4 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"15\">\n       <a href=\"/profile/marek\">marek</a>\n       committed to\n       <a href=\"/topics/27\">test moodle</a>\n       <br />\n       <span class='muted' title=\"2013-10-04 18:16\">4 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"12\">\n       <a href=\"/profile/marek\">marek</a>\n       committed 3 times to\n       <a href=\"/topics/22\">Out of the box file handling</a>\n       <br />\n       <span class='muted' title=\"2013-09-16 07:31\">5 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"11\">\n       <a href=\"/profile/marek\">marek</a>\n       cloned topic from\n       <a href=\"/topics/27\">test moodle</a>\n       <br />\n       <span class='muted' title=\"2013-09-14 23:52\">5 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"10\">\n       <a href=\"/profile/marek\">marek</a>\n       created new topic\n       <a href=\"/topics/23\">test moodle</a>\n       <br />\n       <span class='muted' title=\"2013-09-13 17:51\">5 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"5\">\n       <a href=\"/profile/marek\">marek</a>\n       committed 5 times to\n       <a href=\"/topics/22\">Out of the box file handling</a>\n       <br />\n       <span class='muted' title=\"2013-09-13 10:14\">5 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"4\">\n       <a href=\"/profile/marek\">marek</a>\n       created new topic\n       <a href=\"/topics/22\">Out of the box file handling</a>\n       <br />\n       <span class='muted' title=\"2013-08-09 10:55\">6 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"3\">\n       <a href=\"/profile/marek\">marek</a>\n       created new topic\n       <a href=\"/topics/21\">test 2</a>\n       <br />\n       <span class='muted' title=\"2013-08-09 10:51\">6 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"2\">\n       <a href=\"/profile/marek\">marek</a>\n       created new topic\n       <a href=\"/topics/19\">test</a>\n       <br />\n       <span class='muted' title=\"2013-05-08 14:16\">9 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n<li>\n <p>\n   <div class='row'>\n     <div class='span1' style='width: 42px'>\n       <img class='img-rounded' src='https://secure.gravatar.com/avatar/c52fd12777c01fb592572644cfe091a4?s=36' />\n     </div>\n\n     <div style='margin-top: -2px; margin-left: 5px' data-activity-id=\"1\">\n       <a href=\"/profile/marek\">marek</a>\n       created new topic\n       test\n       <br />\n       <span class='muted' title=\"2013-05-08 06:08\">9 months ago</span>\n     </div>\n   </div>\n </p>\n</li>\n\n </ul>\n \n\n\n </div>\n\n <div class=\"span4 sidebar\">\n\n   <div class=\"well\">\n     Read our latest <a href=\"/blog\">blog</a>.\n   </div>\n\n\n   <!-- Organizations -->\n   <div class=\"block clearfix\">\n     <div class=\"block-header clearfix\">\n       <h3 class=\"block-title\"><i class=\"icon-group\"></i> Organizations</h3>\n       <div class=\"block-action\"><a href=\"/organizations/new\" class=\"btn btn-success btn-small\"><i class=\"icon-plus icon-white\"></i> Create organization</a></div>\n     </div>\n     <div class=\"block-content\">\n       <ul class=\"listing unstyled\">\n         <li>\n <a href=\"/profile/atomicant2\">atomicant2</a>\n</li>\n         <li class=\"show-all\"><a href=\"/organizations\">Show all</a></li>\n       </ul>\n     </div>\n   </div>\n   <!-- /Organizations -->\n\n   <!-- Your topics -->\n   <div class=\"block clearfix\">\n     <div class=\"block-header clearfix\">\n       <h3 class=\"block-title\"><i class=\"icon-book\"></i> Your topics</h3>\n       <div class=\"block-action\"><a href=\"/topics/new\" class=\"btn btn-success btn-small\"><i class=\"icon-plus icon-white\"></i> Create topic</a></div>\n     </div>\n     <div class=\"block-content\">\n       <ul class=\"listing unstyled\">\n         <li>\n   <i class=\"icon-lock\"></i> \n <a href=\"/topics/22\">Out of the box file handling</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/27\">test moodle</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/26\">test</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/25\">test</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/19\">test</a>\n</li>\n         <li class=\"show-all\"><a href=\"/topics\">Show all</a></li>\n       </ul>\n     </div>\n   </div>\n   <!-- /Your topics -->\n\n   <!-- Starred topics -->\n   <div class=\"block clearfix\">\n     <div class=\"block-header clearfix\">\n       <h3 class=\"block-title\"><i class=\"icon-star\"></i> Starred topics</h3>\n     </div>\n     <div class=\"block-content\">\n       <ul class=\"listing unstyled\">\n         <li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/4\">Officia Esse Et Ea Velit</a>\n</li>\n         <li class=\"show-all\"><a href=\"/topics?scope=starred\">Show all</a></li>\n       </ul>\n     </div>\n   </div>\n   <!-- /Starred topics -->\n\n   <!-- Recently created public topics -->\n   <div class=\"block clearfix\">\n     <div class=\"block-header clearfix\">\n       <h3 class=\"block-title\"><i class=\"icon-asterisk\"></i> Recently created public topics</h3>\n     </div>\n     <div class=\"block-content\">\n       <ul class=\"listing unstyled\">\n         <li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/29\">Drupal topic</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/28\">How to create an Article With a longer title</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/27\">test moodle</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/26\">test</a>\n</li><li>\n   <i class=\"icon-eye-open\"></i> \n <a href=\"/topics/25\">test</a>\n</li>\n         <li class=\"show-all\"><a href=\"/topics?scope=public\">Show all</a></li>\n       </ul>\n     </div>\n   </div>\n   <!-- /Recently created public topics -->\n\n </div> <!-- /sidebar -->\n</div>\n\n<!-- main content -->\n             </div>\n           </div>\n         </div> <!-- end of .main-content -->\n       </div> <!-- end of .container -->\n     </div> <!-- end of #main -->\n     <div id=\"push\"></div>\n   </div> <!-- end of #wrap -->\n\n   <div id=\"footer\">\n     <div class=\"container\">\n       <div class=\"row\">\n         <div class=\"span4\">\n           <p class=\"muted credit\">&copy; Inline Manual 2014.</p>\n         </div>\n         <div class=\"span8 footer-nav\">\n           <ul class=\"nav nav-pills\">\n             <li><a href=\"/\">Home</a></li>\n             <li class=\"\"><a href=\"/features\">Features</a></li>\n             <li class=\"\"><a href=\"/pricing\">Pricing</a></li>\n             <li class=\"\"><a href=\"/blog\">Blog</a></li>\n<!--               <li class=\"\"><a href=\"/faq\">FAQ</a></li>\n-->\n             <li class=\"\"><a href=\"/about_us\">About Us</a></li>\n             <li class=\"\"><a href=\"/jobs\">Jobs</a></li>\n             <li class=\"\"><a href=\"/contact\">Contact</a></li>\n           </ul>\n         </div>\n       </div>\n     </div>\n   </div>";

  describe('CSS Selector Generator', function() {
    var root, x;
    root = null;
    x = null;
    beforeEach(function() {
      x = new CssSelectorGenerator();
      root = document.createElement('div');
      root.innerHTML = "<ul> <li></li> <li></li> <li> <a href='linkOne' class='linkOne'></a> <a href='linkTwo' class='linkTwo'></a> <a href='linkThree' class='linkThree'></a> </li> </ul> <ul> <li class='itemOne first'> <a href='linkOne' class='linkOne'></a> <a href='linkTwo' class='linkTwo'></a> <a href='linkThree' class='linkThree'></a> </li> <li class='itemTwo'> <a href='linkOne'></a> <a href='linkTwo'></a> <a href='linkThree'></a> <a></a> <a href='linkOne' class='classOne classTwo classThree' ></a> <a href='linkTwo' target='someTarget2' rel='someRel' class='classOne classTwo classThree' ></a> <a href='linkThree' target='someTarget' rel='someRel' class='classOne classTwo classThree' id='linkZero' ></a> </li> <li class='itemThree last'> <a href='linkOne' id='linkOne' class='classOne classTwo classThree' ></a> <a href='linkTwo' id='linkTwo'></a> <a href='linkThree' id='linkThree'></a> </li> </ul>";
      return document.body.appendChild(root);
    });
    afterEach(function() {
      return root.parentNode.removeChild(root);
    });
    it('should exist', function() {
      return expect(CssSelectorGenerator).toBeDefined();
    });
    it('should check if provided object is HTML element', function() {
      expect(x.isElement()).toBe(false);
      expect(x.isElement(null)).toBe(false);
      expect(x.isElement('aaa')).toBe(false);
      expect(x.isElement({
        aaa: 'bbb'
      })).toBe(false);
      return expect(x.isElement(root)).toBe(true);
    });
    it('should return list of all parents of an element', function() {
      var elm, result;
      elm = root.querySelector('#linkZero');
      result = x.getParents(elm);
      expect(result.length).toBe(6);
      expect(result[0]).toBe(elm);
      expect(result[1].tagName).toBe('LI');
      expect(result[2].tagName).toBe('UL');
      return expect(result[3].tagName).toBe('DIV');
    });
    it('should get tag selector for an element', function() {
      var elm;
      elm = root.querySelector('#linkZero');
      return expect(x.getTagSelector(elm)).toBe('a');
    });
    it('should get ID selector for an element', function() {
      var elm;
      elm = root.querySelector('#linkZero');
      expect(x.getIdSelector(elm)).toBe('#linkZero');
      return expect(x.getIdSelector(root)).toBe(null);
    });
    it('should get class selectors for an element', function() {
      var elm, expectation, result;
      elm = root.querySelector('#linkZero');
      result = x.getClassSelectors(elm);
      expectation = ['.classOne', '.classTwo', '.classThree'];
      expect(result).toEqual(expectation);
      return expect(x.getClassSelectors(root)).toEqual([]);
    });
    it('should remove unnecessary whitespace when getting class names', function() {
      var elm, expectation, result;
      elm = document.createElement('div');
      elm.setAttribute('class', ' aaa  bbb ccc      ');
      expectation = ['.aaa', '.bbb', '.ccc'];
      result = x.getClassSelectors(elm);
      return expect(result).toEqual(expectation);
    });
    it('should handle elements with empty class name', function() {
      var elm, result;
      elm = document.createElement('div');
      elm.setAttribute('class', '');
      result = x.getClassSelectors(elm);
      return expect(result).toEqual([]);
    });
    it('should get attribute selectors for an element', function() {
      var elm, result;
      elm = root.querySelector('#linkZero');
      result = x.getAttributeSelectors(elm);
      expect(result).toContain('[href=linkThree]');
      expect(result).toContain('[target=someTarget]');
      expect(result).toContain('[rel=someRel]');
      expect(result).not.toContain('[id=linkZero]');
      expect(result.length).toBe(3);
      return expect(x.getClassSelectors(root)).toEqual([]);
    });
    it('should get n-th child selector for an element', function() {
      var elm, result;
      elm = root.querySelector('#linkZero');
      result = x.getNthChildSelector(elm);
      return expect(result).toBe(':nth-child(7)');
    });
    it('should test, if selector returns only expected element', function() {
      var elm, selector;
      elm = root.querySelector('#linkZero');
      selector = '#linkZero';
      expect(x.testSelector(elm, selector, root)).toBe(true);
      selector = '.classOne';
      expect(x.testSelector(elm, selector, root)).toBe(false);
      selector = 'a[rel=someRel]';
      expect(x.testSelector(elm, selector, root)).toBe(false);
      selector = 'a[target=someTarget]';
      expect(x.testSelector(elm, selector, root)).toBe(true);
      selector = 'a[target=someTarget][rel=someRel]';
      return expect(x.testSelector(elm, selector, root)).toBe(true);
    });
    it('should construct unique selector for any given element', function() {
      var all_elements, element, selector, _i, _len, _results;
      all_elements = root.querySelectorAll('*');
      _results = [];
      for (_i = 0, _len = all_elements.length; _i < _len; _i++) {
        element = all_elements[_i];
        selector = x.getSelector(element);
        _results.push(expect(x.testSelector(element, selector)).toBe(true));
      }
      return _results;
    });
    return it('should pass the complex test', function() {
      var all_elements, element, selector, _i, _len, _results;
      root = document.createElement('div');
      root.innerHTML = complex_example;
      document.body.appendChild(root);
      all_elements = root.querySelectorAll('*');
      _results = [];
      for (_i = 0, _len = all_elements.length; _i < _len; _i++) {
        element = all_elements[_i];
        selector = x.getSelector(element);
        _results.push(expect(x.testSelector(element, selector)).toBe(true));
      }
      return _results;
    });
  });

}).call(this);
